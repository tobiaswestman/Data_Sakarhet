@page
@model TemperatureModel

<h1>Temperaturöversikt</h1>

<ul id="temperatureList">
    @foreach (var temp in Model.InitialTemperatures)
    {
        <li>Enhet: @temp.Device - Temperatur: @temp.Temperature°C</li>
    }
    <!-- Element kommer att läggas till här i realtid -->
</ul>

@section Scripts {
    <script>
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/temperatureHub")
            .build();

        connection.on("ReceiveTemperature", function (device, temperature) {
            const listItem = document.createElement("li");
            listItem.textContent = `Enhet: ${device} - Temperatur: ${temperature}°C`;
            document.getElementById("temperatureList").appendChild(listItem);
        });

        connection.start().catch(err => console.error(err.toString()));
    </script>
}
